import{d as j,E,r as m,o as A,c as o,a as r,b as e,h as g,F as L,g as N,t as b,s as S,f as z,G as k,H as n,I as d,J as C}from"./index-B-cBX56K.js";import{u as B}from"./menu-KjFtFX1x.js";const q={class:"p-6"},D={key:0,class:"flex justify-center items-center py-12"},H={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},F={class:"h-48 bg-gray-200 relative"},I=["src","alt"],R={key:1,class:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-400"},T={key:2,class:"absolute top-4 right-4 bg-error-600 text-white text-xs px-2 py-1 rounded-full"},$={class:"p-6"},G={class:"text-xl font-display text-gray-800 mb-2"},J={class:"text-gray-600 text-sm mb-4 line-clamp-2"},K={class:"flex justify-between items-center"},O=["onClick"],P=["onClick"],Q={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},W={class:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 overflow-hidden"},X={class:"p-6"},Y={class:"flex items-center"},Z={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ee={class:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 overflow-hidden"},te={class:"p-6"},le={class:"flex items-center"},oe=j({__name:"CategoriesView",setup(se){const u=B(),h=E(),p=m(!0),c=m(!1),v=m(!1),s=m(null),i=m({name:"",description:"",image_url:"",is_available:!0});A(async()=>{try{await u.fetchCategories()}catch(a){console.error("Error loading categories:",a),h.error("Failed to load categories")}finally{p.value=!1}});function _(){c.value=!0}function y(){c.value=!1,i.value={name:"",description:"",image_url:"",is_available:!0}}async function f(){try{await u.createCategory(i.value),y()}catch(a){console.error("Error creating category:",a)}}function M(a){s.value={...a},v.value=!0}function x(){s.value=null,v.value=!1}async function w(){var a;if((a=s.value)!=null&&a.id)try{await u.updateCategory(s.value.id,s.value),x()}catch(t){console.error("Error updating category:",t)}}async function U(a){try{await u.toggleCategoryAvailability(a)}catch(t){console.error("Error toggling category availability:",t)}}return(a,t)=>(r(),o("div",q,[e("div",{class:"flex justify-between items-center mb-8"},[t[8]||(t[8]=e("h1",{class:"text-2xl font-display text-gray-800"},"Categories",-1)),e("button",{onClick:_,class:"btn-primary"}," Add New Category ")]),p.value?(r(),o("div",D,t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-700"},null,-1)]))):(r(),o("div",H,[(r(!0),o(L,null,N(z(u).categories,l=>(r(),o("div",{key:l.id,class:"bg-white rounded-lg shadow-elegant overflow-hidden"},[e("div",F,[l.image_url?(r(),o("img",{key:0,src:l.image_url,alt:l.name,class:"w-full h-full object-cover"},null,8,I)):(r(),o("div",R,t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))),l.is_available?g("",!0):(r(),o("div",T," Unavailable "))]),e("div",$,[e("h3",G,b(l.name),1),e("p",J,b(l.description),1),e("div",K,[e("button",{onClick:V=>M(l),class:"text-gray-600 hover:text-primary-700 transition-colors"},t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,O),e("button",{onClick:V=>U(l.id),class:S(["text-sm px-3 py-1 rounded-full transition-colors",l.is_available?"bg-success-100 text-success-700 hover:bg-success-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},b(l.is_available?"Available":"Unavailable"),11,P)])])]))),128))])),c.value?(r(),o("div",Q,[e("div",W,[e("div",X,[t[16]||(t[16]=e("h2",{class:"text-2xl font-display text-gray-800 mb-6"},"Add New Category",-1)),e("form",{onSubmit:k(f,["prevent"]),class:"space-y-4"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.value.name=l),type:"text",required:"",class:"input-field"},null,512),[[d,i.value.name]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),n(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.value.description=l),rows:"3",required:"",class:"input-field"},null,512),[[d,i.value.description]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Image URL",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>i.value.image_url=l),type:"url",class:"input-field"},null,512),[[d,i.value.image_url]])]),e("div",Y,[n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>i.value.is_available=l),type:"checkbox",id:"is-available",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[C,i.value.is_available]]),t[15]||(t[15]=e("label",{for:"is-available",class:"ml-2 block text-sm text-gray-700"}," Available for ordering ",-1))])],32)]),e("div",{class:"bg-gray-50 px-6 py-4 flex justify-end space-x-4"},[e("button",{onClick:y,class:"btn-outline"}," Cancel "),e("button",{onClick:f,class:"btn-primary"}," Create Category ")])])])):g("",!0),v.value?(r(),o("div",Z,[e("div",ee,[e("div",te,[t[21]||(t[21]=e("h2",{class:"text-2xl font-display text-gray-800 mb-6"},"Edit Category",-1)),e("form",{onSubmit:k(w,["prevent"]),class:"space-y-4"},[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.name=l),type:"text",required:"",class:"input-field"},null,512),[[d,s.value.name]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),n(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.description=l),rows:"3",required:"",class:"input-field"},null,512),[[d,s.value.description]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Image URL",-1)),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.image_url=l),type:"url",class:"input-field"},null,512),[[d,s.value.image_url]])]),e("div",le,[n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.is_available=l),type:"checkbox",id:"edit-is-available",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[C,s.value.is_available]]),t[20]||(t[20]=e("label",{for:"edit-is-available",class:"ml-2 block text-sm text-gray-700"}," Available for ordering ",-1))])],32)]),e("div",{class:"bg-gray-50 px-6 py-4 flex justify-end space-x-4"},[e("button",{onClick:x,class:"btn-outline"}," Cancel "),e("button",{onClick:w,class:"btn-primary"}," Save Changes ")])])])):g("",!0)]))}});export{oe as default};
