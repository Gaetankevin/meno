import{d as N,E as z,r as c,o as B,l as D,c as i,a as n,b as t,h as g,F as b,g as y,t as m,s as F,G as _,H as r,I as d,K as h,f as I,J as U}from"./index-B-cBX56K.js";import{u as H}from"./menu-KjFtFX1x.js";const P={class:"p-6"},$={key:0,class:"flex justify-center items-center py-12"},R={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},T={class:"h-48 bg-gray-200 relative"},G=["src","alt"],J={key:1,class:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-400"},K={class:"absolute top-4 left-4"},O={class:"badge-secondary"},Q={key:2,class:"absolute top-4 right-4 bg-error-600 text-white text-xs px-2 py-1 rounded-full"},W={class:"p-6"},X={class:"text-xl font-display text-gray-800 mb-2"},Y={class:"text-gray-600 text-sm mb-4 line-clamp-2"},Z={class:"text-lg font-semibold text-primary-700 mb-4"},ee={class:"flex justify-between items-center"},te={class:"space-x-2"},le=["onClick"],se=["onClick"],ae=["onClick"],oe={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ie={class:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 overflow-hidden"},ne={class:"p-6"},re=["value"],ue={class:"flex items-center"},de={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},me={class:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 overflow-hidden"},ce={class:"p-6"},ve=["value"],pe={class:"flex items-center"},fe=N({__name:"MenuItemsView",setup(ge){const u=H(),V=z(),f=c(!0),v=c(!1),p=c(!1),a=c(null),o=c({name:"",description:"",price:0,category_id:0,image_url:"",is_available:!0});B(async()=>{try{await Promise.all([u.fetchCategories(),u.fetchMenuItems()])}catch(s){console.error("Error loading data:",s),V.error("Failed to load menu items")}finally{f.value=!1}});function j(){v.value=!0}function x(){v.value=!1,o.value={name:"",description:"",price:0,category_id:0,image_url:"",is_available:!0}}async function w(){try{await u.createMenuItem(o.value),x()}catch(s){console.error("Error creating menu item:",s)}}function E(s){a.value={...s},p.value=!0}function k(){a.value=null,p.value=!1}async function C(){var s;if((s=a.value)!=null&&s.id)try{await u.updateMenuItem(a.value.id,a.value),k()}catch(e){console.error("Error updating menu item:",e)}}async function A(s){if(confirm("Are you sure you want to delete this menu item?"))try{await u.deleteMenuItem(s)}catch(e){console.error("Error deleting menu item:",e)}}async function S(s){try{await u.toggleMenuItemAvailability(s)}catch(e){console.error("Error toggling menu item availability:",e)}}const q=D(()=>u.menuItems.sort((s,e)=>s.category_id!==e.category_id?s.category_id-e.category_id:s.name.localeCompare(e.name)));function L(s){const e=u.categories.find(l=>l.id===s);return(e==null?void 0:e.name)||"Uncategorized"}return(s,e)=>(n(),i("div",P,[t("div",{class:"flex justify-between items-center mb-8"},[e[12]||(e[12]=t("h1",{class:"text-2xl font-display text-gray-800"},"Menu Items",-1)),t("button",{onClick:j,class:"btn-primary"}," Add New Item ")]),f.value?(n(),i("div",$,e[13]||(e[13]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-700"},null,-1)]))):(n(),i("div",R,[(n(!0),i(b,null,y(q.value,l=>(n(),i("div",{key:l.id,class:"bg-white rounded-lg shadow-elegant overflow-hidden"},[t("div",T,[l.image_url?(n(),i("img",{key:0,src:l.image_url,alt:l.name,class:"w-full h-full object-cover"},null,8,G)):(n(),i("div",J,e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))),t("div",K,[t("span",O,m(L(l.category_id)),1)]),l.is_available?g("",!0):(n(),i("div",Q," Unavailable "))]),t("div",W,[t("h3",X,m(l.name),1),t("p",Y,m(l.description),1),t("p",Z,"F.CFA "+m(l.price),1),t("div",ee,[t("div",te,[t("button",{onClick:M=>E(l),class:"text-gray-600 hover:text-primary-700 transition-colors"},e[15]||(e[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,le),t("button",{onClick:M=>A(l.id),class:"text-gray-600 hover:text-error-600 transition-colors"},e[16]||(e[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,se)]),t("button",{onClick:M=>S(l.id),class:F(["text-sm px-3 py-1 rounded-full transition-colors",l.is_available?"bg-success-100 text-success-700 hover:bg-success-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},m(l.is_available?"Available":"Unavailable"),11,ae)])])]))),128))])),v.value?(n(),i("div",oe,[t("div",ie,[t("div",ne,[e[24]||(e[24]=t("h2",{class:"text-2xl font-display text-gray-800 mb-6"},"Add New Menu Item",-1)),t("form",{onSubmit:_(w,["prevent"]),class:"space-y-4"},[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name=l),type:"text",required:"",class:"input-field"},null,512),[[d,o.value.name]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),r(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.description=l),rows:"3",required:"",class:"input-field"},null,512),[[d,o.value.description]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Price",-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.price=l),type:"number",step:"0.01",required:"",class:"input-field"},null,512),[[d,o.value.price]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),r(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.category_id=l),required:"",class:"input-field"},[e[20]||(e[20]=t("option",{value:""},"Select a category",-1)),(n(!0),i(b,null,y(I(u).categories,l=>(n(),i("option",{key:l.id,value:l.id},m(l.name),9,re))),128))],512),[[h,o.value.category_id]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Image URL",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.image_url=l),type:"url",class:"input-field"},null,512),[[d,o.value.image_url]])]),t("div",ue,[r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.is_available=l),type:"checkbox",id:"is-available",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[U,o.value.is_available]]),e[23]||(e[23]=t("label",{for:"is-available",class:"ml-2 block text-sm text-gray-700"}," Available for ordering ",-1))])],32)]),t("div",{class:"bg-gray-50 px-6 py-4 flex justify-end space-x-4"},[t("button",{onClick:x,class:"btn-outline"}," Cancel "),t("button",{onClick:w,class:"btn-primary"}," Create Item ")])])])):g("",!0),p.value?(n(),i("div",de,[t("div",me,[t("div",ce,[e[32]||(e[32]=t("h2",{class:"text-2xl font-display text-gray-800 mb-6"},"Edit Menu Item",-1)),t("form",{onSubmit:_(C,["prevent"]),class:"space-y-4"},[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.name=l),type:"text",required:"",class:"input-field"},null,512),[[d,a.value.name]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),r(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.description=l),rows:"3",required:"",class:"input-field"},null,512),[[d,a.value.description]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Price",-1)),r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.price=l),type:"number",step:"0.01",required:"",class:"input-field"},null,512),[[d,a.value.price]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),r(t("select",{"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.category_id=l),required:"",class:"input-field"},[e[28]||(e[28]=t("option",{value:""},"Select a category",-1)),(n(!0),i(b,null,y(I(u).categories,l=>(n(),i("option",{key:l.id,value:l.id},m(l.name),9,ve))),128))],512),[[h,a.value.category_id]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Image URL",-1)),r(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>a.value.image_url=l),type:"url",class:"input-field"},null,512),[[d,a.value.image_url]])]),t("div",pe,[r(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>a.value.is_available=l),type:"checkbox",id:"edit-is-available",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[U,a.value.is_available]]),e[31]||(e[31]=t("label",{for:"edit-is-available",class:"ml-2 block text-sm text-gray-700"}," Available for ordering ",-1))])],32)]),t("div",{class:"bg-gray-50 px-6 py-4 flex justify-end space-x-4"},[t("button",{onClick:k,class:"btn-outline"}," Cancel "),t("button",{onClick:C,class:"btn-primary"}," Save Changes ")])])])):g("",!0)]))}});export{fe as default};
