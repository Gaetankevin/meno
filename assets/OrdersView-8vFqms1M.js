import{d as F,k as D,E as T,r as x,o as A,c as o,a as l,b as t,h as c,f as v,F as b,g as h,t as r,s as w}from"./index-lVYO9Yiu.js";const B={class:"p-6"},E={key:0,class:"flex justify-center items-center py-12"},L={key:1,class:"bg-white rounded-lg shadow-elegant overflow-hidden"},M={class:"overflow-x-auto"},N={class:"w-full"},V={class:"divide-y divide-gray-200"},$={class:"px-6 py-4 whitespace-nowrap"},q={class:"px-6 py-4 whitespace-nowrap"},z={class:"px-6 py-4 whitespace-nowrap"},I={class:"px-6 py-4 whitespace-nowrap"},P={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},G={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},H=["onClick"],J={key:2,class:"text-center py-12 text-gray-500"},K={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Q={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 overflow-hidden"},R={class:"p-6"},U={class:"flex justify-between items-start mb-6"},W={class:"text-2xl font-display text-gray-800"},X={class:"text-sm text-gray-500"},Y={class:"mb-6"},Z={class:"flex justify-between items-center mb-4"},tt={class:"font-medium"},et={class:"flex justify-between items-center"},st={class:"border-t border-gray-200 py-6"},at={class:"space-y-4"},rt={class:"font-medium"},nt={class:"text-sm text-gray-500"},ot={class:"font-medium"},lt={class:"mt-6 pt-6 border-t border-gray-200"},it={class:"flex justify-between items-center text-lg font-semibold"},dt={class:"mt-6 flex justify-end space-x-4"},pt=F({__name:"OrdersView",setup(ct){const d=D(),k=T(),m=x(!0),a=x(null),u=x(!1);A(async()=>{try{await d.fetchOrders()}catch(n){console.error("Error loading orders:",n),k.error("Failed to load orders")}finally{m.value=!1}});function C(n){a.value=n,u.value=!0}function O(){a.value=null,u.value=!1}async function p(n,e){var s;try{await d.updateOrderStatus(n,e),((s=a.value)==null?void 0:s.id)===n&&(a.value.status=e)}catch(i){console.error("Error updating order status:",i)}}const S={pending:"bg-warning-100 text-warning-800",processing:"bg-primary-100 text-primary-800",completed:"bg-success-100 text-success-800",cancelled:"bg-error-100 text-error-800"};function y(n){return S[n]||"bg-gray-100 text-gray-800"}function f(n){return new Date(n).toLocaleString()}function j(n){return n.reduce((e,s)=>{var i;return e+(((i=s.menu_item)==null?void 0:i.price)||0)*s.quantity},0)}return(n,e)=>(l(),o("div",B,[e[10]||(e[10]=t("h1",{class:"text-2xl font-display text-gray-800 mb-8"},"Orders",-1)),m.value?(l(),o("div",E,e[3]||(e[3]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-700"},null,-1)]))):v(d).orders.length>0?(l(),o("div",L,[t("div",M,[t("table",N,[e[4]||(e[4]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Table"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Items"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Time"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",V,[(l(!0),o(b,null,h(v(d).orders,s=>(l(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",$," #"+r(s.id),1),t("td",q," Table "+r(s.table_number),1),t("td",z,r(s.items.length)+" items ",1),t("td",I,[t("span",{class:w(["px-2 py-1 rounded-full text-xs",y(s.status)])},r(s.status),3)]),t("td",P,r(f(s.created_at)),1),t("td",G,[t("button",{onClick:i=>C(s),class:"text-primary-600 hover:text-primary-900"}," View Details ",8,H)])]))),128))])])])])):(l(),o("div",J," No orders found ")),u.value?(l(),o("div",K,[t("div",Q,[t("div",R,[t("div",U,[t("div",null,[t("h2",W," Order #"+r(a.value.id),1),t("p",X,r(f(a.value.created_at)),1)]),t("button",{onClick:O,class:"text-gray-400 hover:text-gray-500"},e[5]||(e[5]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",Y,[t("div",Z,[e[6]||(e[6]=t("span",{class:"text-gray-600"},"Table Number:",-1)),t("span",tt,r(a.value.table_number),1)]),t("div",et,[e[7]||(e[7]=t("span",{class:"text-gray-600"},"Status:",-1)),t("span",{class:w(["px-2 py-1 rounded-full text-sm",y(a.value.status)])},r(a.value.status),3)])]),t("div",st,[e[9]||(e[9]=t("h3",{class:"text-lg font-medium mb-4"},"Order Items",-1)),t("div",at,[(l(!0),o(b,null,h(a.value.items,s=>{var i,g,_;return l(),o("div",{key:s.menu_item_id,class:"flex justify-between items-center"},[t("div",null,[t("p",rt,r((i=s.menu_item)==null?void 0:i.name),1),t("p",nt," F.CFA "+r((g=s.menu_item)==null?void 0:g.price)+" Ã— "+r(s.quantity),1)]),t("p",ot," F.CFA "+r((((_=s.menu_item)==null?void 0:_.price)||0)*s.quantity),1)])}),128))]),t("div",lt,[t("div",it,[e[8]||(e[8]=t("span",null,"Total",-1)),t("span",null,"F.CFA "+r(j(a.value.items)),1)])])]),t("div",dt,[a.value.status==="pending"?(l(),o("button",{key:0,onClick:e[0]||(e[0]=s=>p(a.value.id,"processing")),class:"btn-primary"}," Start Processing ")):c("",!0),a.value.status==="processing"?(l(),o("button",{key:1,onClick:e[1]||(e[1]=s=>p(a.value.id,"completed")),class:"btn-success"}," Mark as Completed ")):c("",!0),["pending","processing"].includes(a.value.status)?(l(),o("button",{key:2,onClick:e[2]||(e[2]=s=>p(a.value.id,"cancelled")),class:"btn-error"}," Cancel Order ")):c("",!0)])])])])):c("",!0)]))}});export{pt as default};
